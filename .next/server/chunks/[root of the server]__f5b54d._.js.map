{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["turbopack://[project]/prisma/prisma-client.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\n\nconst prismaClientSingleton = () => {\n    return new PrismaClient()\n}\n\ndeclare const globalThis: {\n    prismaGlobal: ReturnType<typeof prismaClientSingleton>;\n} & typeof global;\n\nexport const prisma = globalThis.prismaGlobal ?? prismaClientSingleton()\n\nif (process.env.NODE_ENV !== 'production') globalThis.prismaGlobal = prisma"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,wBAAwB;IAC1B,OAAO,IAAI,2GAAA,CAAA,eAAY;AAC3B;AAMO,MAAM,SAAS,WAAW,YAAY,IAAI;AAEjD,wCAA2C,WAAW,YAAY,GAAG"}},
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 71, "column": 0}, "map": {"version":3,"sources":["turbopack://[project]/src/lib/calc-cart-item-total-amount.ts"],"sourcesContent":["import { Ingredient, ProductItem } from '@prisma/client';\n\ntype Item = {\n  productItem: ProductItem;\n  ingredients: Ingredient[];\n  quantity: number;\n};\n\nexport const calcCartItemTotalAmount = (item: Item): number => {\n  return (\n    (item.productItem.price +\n      item.ingredients.reduce((acc, ingredient) => acc + ingredient.price, 0)) *\n    item.quantity\n  );\n};\n"],"names":[],"mappings":";;;AAQO,MAAM,0BAA0B,CAAC;IACtC,OACE,CAAC,KAAK,WAAW,CAAC,KAAK,GACrB,KAAK,WAAW,CAAC,MAAM,CAAC,CAAC,KAAK,aAAe,MAAM,WAAW,KAAK,EAAE,EAAE,IACzE,KAAK,QAAQ;AAEjB"}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 83, "column": 0}, "map": {"version":3,"sources":["turbopack://[project]/src/app/api/cart/route.ts"],"sourcesContent":["import {NextRequest, NextResponse} from 'next/server';\nimport {prisma} from '../../../../prisma/prisma-client';\nimport { calcCartItemTotalAmount } from '@/lib/calc-cart-item-total-amount';\n\n\nexport async function GET(req: NextRequest) {\n    try {\n\n        const cartToken = req.cookies.get('cartToken')?.value;\n\n\n        if (!cartToken) {\n            return NextResponse.json({items: []});\n        }\n\n        const userCart = await prisma.cart.findFirst({\n            where: {\n                OR: [\n                    {\n                        tokenId: cartToken,\n                    },\n                ],\n            },\n            include: {\n                items: {\n                    orderBy: {\n                        createdAt: 'desc',\n                    },\n                    include: {\n                        productItem: {\n                            include: {\n                                product: true,\n                            },\n                        },\n                        ingredients: true,\n                    },\n                },\n            },\n        });\n\n        return NextResponse.json(userCart);\n    } catch (err) {\n        console.log(err);\n        return NextResponse.json({message: '[CART_GET] Server error'}, {status: 500});\n    }\n}\n\nasync function getCartTotalAmount(cartId: number): Promise<number> {\n    const userCartAfterUpdate = await prisma.cart.findFirst({\n        where: {\n            id: cartId,\n        },\n        include: {\n            items: {\n                orderBy: {\n                    createdAt: 'desc',\n                },\n                include: {\n                    productItem: {\n                        include: {\n                            product: true,\n                        },\n                    },\n                    ingredients: true,\n                },\n            },\n        },\n        orderBy: {\n            createdAt: 'desc',\n        },\n    });\n\n    const totalAmount = userCartAfterUpdate?.items.reduce(\n        (acc, item) => acc + calcCartItemTotalAmount(item),\n        0,\n    );\n\n    return totalAmount ?? 0;\n}"],"names":[],"mappings":";;;AAAA;AACA;AACA;;;;AAGO,eAAe,IAAI,GAAgB;IACtC,IAAI;QAEA,MAAM,YAAY,IAAI,OAAO,CAAC,GAAG,CAAC,cAAc;QAGhD,IAAI,CAAC,WAAW;YACZ,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;gBAAC,OAAO,EAAE;YAAA;QACvC;QAEA,MAAM,WAAW,MAAM,4HAAA,CAAA,SAAM,CAAC,IAAI,CAAC,SAAS,CAAC;YACzC,OAAO;gBACH,IAAI;oBACA;wBACI,SAAS;oBACb;iBACH;YACL;YACA,SAAS;gBACL,OAAO;oBACH,SAAS;wBACL,WAAW;oBACf;oBACA,SAAS;wBACL,aAAa;4BACT,SAAS;gCACL,SAAS;4BACb;wBACJ;wBACA,aAAa;oBACjB;gBACJ;YACJ;QACJ;QAEA,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;IAC7B,EAAE,OAAO,KAAK;QACV,QAAQ,GAAG,CAAC;QACZ,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAC,SAAS;QAAyB,GAAG;YAAC,QAAQ;QAAG;IAC/E;AACJ;AAEA,eAAe,mBAAmB,MAAc;IAC5C,MAAM,sBAAsB,MAAM,4HAAA,CAAA,SAAM,CAAC,IAAI,CAAC,SAAS,CAAC;QACpD,OAAO;YACH,IAAI;QACR;QACA,SAAS;YACL,OAAO;gBACH,SAAS;oBACL,WAAW;gBACf;gBACA,SAAS;oBACL,aAAa;wBACT,SAAS;4BACL,SAAS;wBACb;oBACJ;oBACA,aAAa;gBACjB;YACJ;QACJ;QACA,SAAS;YACL,WAAW;QACf;IACJ;IAEA,MAAM,cAAc,qBAAqB,MAAM,OAC3C,CAAC,KAAK,OAAS,MAAM,CAAA,GAAA,uJAAA,CAAA,0BAAuB,AAAD,EAAE,OAC7C;IAGJ,OAAO,eAAe;AAC1B"}},
    {"offset": {"line": 161, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}